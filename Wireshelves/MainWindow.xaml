<hui:Window
    x:Class="Wireshelves.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:b="http://schemas.microsoft.com/xaml/behaviors"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:hui="https://github.com/lokihonoo/honooui.wpf"
    xmlns:local="clr-namespace:Wireshelves"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:vm="clr-namespace:Wireshelves.ViewModels"
    x:Name="Window"
    Title="Wireshelves"
    Background="{DynamicResource SecondaryBackgroundBrush}"
    CaptionBackground="{DynamicResource SecondaryBackgroundBrush}"
    DataContext="{x:Static vm:MainWindowViewModel.Instance}"
    FontSize="{DynamicResource PrimaryFontSize}"
    Foreground="{DynamicResource PrimaryForegroundBrush}"
    Left="{Binding WindowLeft, Source={x:Static vm:Settings.Instance}, Mode=TwoWay}"
    ResizeMode="CanMinimize"
    SizeToContent="WidthAndHeight"
    SystemButtons="Close"
    Top="{Binding WindowTop, Source={x:Static vm:Settings.Instance}, Mode=TwoWay}"
    mc:Ignorable="d">
    <hui:Window.Resources>
        <local:ThemeStyleToCutomConverter
            x:Key="ThemeStyleToTitleBgConverter"
            DarkValue="/Resources/TitleBg_200x32_D.png"
            OtherValue="/Resources/TitleBg_200x32_L.png" />
        <Style
            x:Key="LabelHeaderStyle"
            BasedOn="{StaticResource {x:Type Label}}"
            TargetType="{x:Type Label}">
            <Setter Property="Margin" Value="9,0,0,0" />
            <Setter Property="Padding" Value="7,2" />
            <Setter Property="Foreground" Value="{DynamicResource PrimaryForegroundBrush}" />
            <Setter Property="Background" Value="{DynamicResource ThirdlyBackgroundBrush}" />
        </Style>
        <ContextMenu x:Key="AppGroupContextMenu">
            <MenuItem
                HorizontalContentAlignment="Left"
                Command="{Binding MoveToPreviousPageCommand, Source={x:Static vm:MainWindowViewModel.Instance}}"
                Header="{Binding Main.MoveToPreviousPage, Source={x:Static vm:LanguagePackage.Instance}}">
                <MenuItem.Icon>
                    <Path
                        Data="{StaticResource ArrowUpBoldHexagonGeometry}"
                        Fill="{DynamicResource PrimaryForegroundBrush}"
                        Style="{StaticResource PathIcon16Style}" />
                </MenuItem.Icon>
            </MenuItem>
            <MenuItem
                HorizontalContentAlignment="Left"
                Command="{Binding MoveToNextPageCommand, Source={x:Static vm:MainWindowViewModel.Instance}}"
                Header="{Binding Main.MoveToNextPage, Source={x:Static vm:LanguagePackage.Instance}}">
                <MenuItem.Icon>
                    <Path
                        Data="{StaticResource ArrowDownBoldHexagonGeometry}"
                        Fill="{DynamicResource PrimaryForegroundBrush}"
                        Style="{StaticResource PathIcon16Style}" />
                </MenuItem.Icon>
            </MenuItem>
            <Separator />
            <MenuItem
                HorizontalContentAlignment="Left"
                Command="{Binding RemoveGroupCommand, Source={x:Static vm:MainWindowViewModel.Instance}}"
                Header="{Binding Main.RemoveGroup, Source={x:Static vm:LanguagePackage.Instance}}">
                <MenuItem.Icon>
                    <Path
                        Data="{StaticResource DeleteGeometry}"
                        Fill="{DynamicResource PrimaryForegroundBrush}"
                        Style="{StaticResource PathIcon16Style}" />
                </MenuItem.Icon>
            </MenuItem>
        </ContextMenu>
    </hui:Window.Resources>
    <b:Interaction.Triggers>
        <b:EventTrigger EventName="Loaded">
            <b:InvokeCommandAction Command="{Binding WindowLoadedCommand}" PassEventArgsToCommand="True" />
        </b:EventTrigger>
        <b:EventTrigger EventName="Closing">
            <b:InvokeCommandAction Command="{Binding WindowClosingCommand}" PassEventArgsToCommand="True" />
        </b:EventTrigger>
        <b:EventTrigger EventName="Deactivated">
            <b:InvokeCommandAction Command="{Binding WindowDeactivatedCommand}" CommandParameter="{Binding RelativeSource={RelativeSource AncestorType={x:Type Window}}}" />
        </b:EventTrigger>
    </b:Interaction.Triggers>
    <hui:Window.CaptionBar>
        <Grid Background="{DynamicResource SecondaryBackgroundBrush}">
            <Image
                Margin="50,0,10,0"
                HorizontalAlignment="Left"
                VerticalAlignment="Center"
                Source="{Binding ThemeStyle, Source={x:Static vm:Settings.Instance}, Converter={StaticResource ThemeStyleToTitleBgConverter}}"
                Stretch="Uniform" />
            <Grid Margin="24,0,0,0" DockPanel.Dock="Left">
                <TextBlock
                    Margin="40,0,0,0"
                    VerticalAlignment="Center"
                    FontSize="12"
                    Foreground="{DynamicResource ThirdlyForegroundBrush}"
                    Text="Lightweight software launcher" />
                <TextBlock
                    Margin="0,-18,0,0"
                    VerticalAlignment="Center"
                    FontSize="16"
                    FontWeight="Bold"
                    Foreground="#FF3464DC"
                    Text="Wireshelves" />
            </Grid>
            <!--  TOP 按钮  -->
            <StackPanel
                Margin="0,0,20,0"
                HorizontalAlignment="Right"
                Orientation="Horizontal"
                WindowChrome.IsHitTestVisibleInChrome="True">
                <hui:MenuButton
                    Width="45"
                    ArrowVisibility="Collapsed"
                    Header="{StaticResource PlusGeometry}"
                    HeaderTemplate="{StaticResource GeometryToPathIcon16DataTemplate}"
                    Style="{DynamicResource HuiMenuButtonSystemStyle}">
                    <MenuItem
                        Command="{Binding AddPageCommand}"
                        CommandParameter="Previous"
                        Header="{Binding Main.AddPreviousPage, Source={x:Static vm:LanguagePackage.Instance}}">
                        <MenuItem.Icon>
                            <Path
                                Data="{StaticResource SquareHalfTopFillGeometry}"
                                Fill="{DynamicResource PrimaryForegroundBrush}"
                                Style="{StaticResource PathIcon16Style}" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem
                        Command="{Binding AddPageCommand}"
                        CommandParameter="Next"
                        Header="{Binding Main.AddNextPage, Source={x:Static vm:LanguagePackage.Instance}}">
                        <MenuItem.Icon>
                            <Path
                                Data="{StaticResource SquareHalfBottomFillGeometry}"
                                Fill="{DynamicResource PrimaryForegroundBrush}"
                                Style="{StaticResource PathIcon16Style}" />
                        </MenuItem.Icon>
                    </MenuItem>
                </hui:MenuButton>
                <hui:ToggleButton
                    CheckedBackground="{DynamicResource Alpha20Brush}"
                    IsChecked="{Binding Pinned, Source={x:Static vm:Settings.Instance}, Mode=TwoWay}"
                    Style="{DynamicResource HuiToggleButtonSystemStyle}"
                    ToolTip="{Binding Main.PinTip, Source={x:Static vm:LanguagePackage.Instance}}"
                    ToolTipService.Placement="Bottom">
                    <hui:CheckStateControl
                        CheckedContent="{StaticResource PinFillGeometry}"
                        CheckedContentTemplate="{StaticResource GeometryToPathIcon16DataTemplate}"
                        CheckedForeground="#FFF19102"
                        IsChecked="{Binding IsChecked, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type ToggleButton}}}"
                        UncheckedContent="{StaticResource PinGeometry}"
                        UncheckedContentTemplate="{StaticResource GeometryToPathIcon16DataTemplate}" />
                </hui:ToggleButton>
            </StackPanel>
        </Grid>
    </hui:Window.CaptionBar>
    <Grid>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <Grid
                Grid.Row="0"
                AllowDrop="True"
                Background="Transparent">
                <b:Interaction.Triggers>
                    <b:EventTrigger EventName="Drop">
                        <b:InvokeCommandAction Command="{Binding AppitemPagePadDropCommand}" PassEventArgsToCommand="True" />
                    </b:EventTrigger>
                    <b:EventTrigger EventName="PreviewMouseWheel">
                        <b:InvokeCommandAction Command="{Binding MouseWheelCommand}" PassEventArgsToCommand="True" />
                    </b:EventTrigger>
                </b:Interaction.Triggers>
                <!--  上区域  -->
                <Grid
                    Height="30"
                    VerticalAlignment="Top"
                    AllowDrop="True" />
                <!--  下区域  -->
                <Grid
                    Height="30"
                    VerticalAlignment="Bottom"
                    AllowDrop="True" />
                <!--  页标识  -->
                <ListBox
                    MaxHeight="400"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Center"
                    d:ItemsSource="{d:SampleData ItemCount=5}"
                    d:Visibility="Visible"
                    Background="Transparent"
                    BorderThickness="0"
                    ItemsSource="{Binding AppItemPages}"
                    SelectedItem="{Binding CurrentAppItemPage, Mode=TwoWay}"
                    Visibility="{Binding AppItemPages.Count, Converter={x:Static hui:NumEqualParamToVisibilityCollapsedConverter.Instance}, ConverterParameter=1}">
                    <ListBox.ItemContainerStyle>
                        <Style BasedOn="{StaticResource {x:Type ListBoxItem}}" TargetType="{x:Type ListBoxItem}">
                            <Setter Property="Margin" Value="0,5,17,5" />
                            <Setter Property="Padding" Value="0" />
                            <Setter Property="Background" Value="Transparent" />
                            <Setter Property="BorderThickness" Value="0" />
                            <Setter Property="hui:DoubleValueAttached.Item1" Value="4" />
                            <Setter Property="FocusVisualStyle" Value="{x:Null}" />
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="true">
                                    <Setter Property="Foreground" Value="{DynamicResource PrimaryForegroundBrush}" />
                                    <Setter Property="hui:DoubleValueAttached.Item1" Value="6" />
                                </Trigger>
                                <Trigger Property="IsSelected" Value="true">
                                    <Setter Property="hui:DoubleValueAttached.Item1" Value="6" />
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </ListBox.ItemContainerStyle>
                    <ListBox.ItemTemplate>
                        <DataTemplate DataType="{x:Type vm:AppItemPage}">
                            <Grid Width="6" Height="6">
                                <Path
                                    Width="{Binding (hui:DoubleValueAttached.Item1), Mode=OneWay, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type ListBoxItem}}}"
                                    Height="{Binding (hui:DoubleValueAttached.Item1), Mode=OneWay, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type ListBoxItem}}}"
                                    d:Height="4"
                                    d:Width="4"
                                    Data="{StaticResource CircleFillGeometry}"
                                    Fill="{DynamicResource ThirdlyForegroundBrush}"
                                    Style="{StaticResource PathIconStyle}" />
                            </Grid>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
                <!--  程序托盘  -->
                <ListBox
                    Margin="35,35,35,35"
                    d:ItemsSource="{d:SampleData ItemCount=0}"
                    Background="Transparent"
                    BorderThickness="0"
                    ItemsSource="{Binding CurrentAppItemPage.AppItemGroups}">
                    <ListBox.ItemsPanel>
                        <ItemsPanelTemplate>
                            <WrapPanel
                                Width="{Binding ShelfCol, Source={x:Static vm:Settings.Instance}, Converter={x:Static hui:NumMulParamToDoubleConverter.Instance}, ConverterParameter=95}"
                                Height="{Binding ShelfRow, Source={x:Static vm:Settings.Instance}, Converter={x:Static hui:NumMulParamToDoubleConverter.Instance}, ConverterParameter=95}"
                                d:Height="475"
                                d:Width="475" />
                        </ItemsPanelTemplate>
                    </ListBox.ItemsPanel>
                    <ListBox.ItemContainerStyle>
                        <Style BasedOn="{StaticResource {x:Type ListBoxItem}}" TargetType="{x:Type ListBoxItem}">
                            <Setter Property="Margin" Value="0" />
                            <Setter Property="Background" Value="Transparent" />
                            <Setter Property="Padding" Value="0" />
                            <Setter Property="BorderThickness" Value="0" />
                            <Setter Property="Focusable" Value="False" />
                        </Style>
                    </ListBox.ItemContainerStyle>
                    <ListBox.ItemTemplate>
                        <DataTemplate DataType="{x:Type vm:AppItemGroup}">
                            <hui:DraggableHaft
                                Width="95"
                                Height="95"
                                AllowDrop="True"
                                Background="Transparent"
                                ClickCommand="{Binding AppItemGroupClickCommand, Source={x:Static vm:MainWindowViewModel.Instance}}"
                                ClickCommandParameter="{Binding}"
                                DragData="{Binding}"
                                DropCommand="{Binding AppItemGroupDropCommand, Source={x:Static vm:MainWindowViewModel.Instance}}"
                                PassEventArgsToClickCommand="True"
                                PassEventArgsToDropCommand="True">
                                <b:Interaction.Triggers>
                                    <b:EventTrigger EventName="DragEnter">
                                        <b:ChangePropertyAction PropertyName="Background" Value="{DynamicResource Alpha0CBrush}" />
                                        <b:InvokeCommandAction Command="{Binding AppItemGroupDragEnterCommand, Source={x:Static vm:MainWindowViewModel.Instance}}" PassEventArgsToCommand="True" />
                                    </b:EventTrigger>
                                    <b:EventTrigger EventName="DragLeave">
                                        <b:ChangePropertyAction PropertyName="Background" Value="Transparent" />
                                        <b:InvokeCommandAction Command="{Binding AppItemGroupDragLeaveCommand, Source={x:Static vm:MainWindowViewModel.Instance}}" PassEventArgsToCommand="True" />
                                    </b:EventTrigger>
                                    <b:EventTrigger EventName="MouseRightButtonUp">
                                        <b:InvokeCommandAction Command="{Binding AppItemGroupMouseRightUpCommand, Source={x:Static vm:MainWindowViewModel.Instance}}" PassEventArgsToCommand="True" />
                                    </b:EventTrigger>
                                </b:Interaction.Triggers>
                                <StackPanel>
                                    <Grid
                                        Width="32"
                                        Height="32"
                                        Margin="15,10,15,10">
                                        <ContentControl Content="{Binding Icon}">
                                            <d:ContentControl.Content>
                                                <d:Path Data="{StaticResource FileBreakGeometry}" Style="{StaticResource PathIcon32Style}" />
                                            </d:ContentControl.Content>
                                        </ContentControl>
                                    </Grid>
                                    <TextBlock
                                        Margin="4,0,4,0"
                                        d:Text="ABC 12345 ZX666"
                                        Text="{Binding Title}"
                                        TextAlignment="Center"
                                        TextWrapping="Wrap" />
                                </StackPanel>
                            </hui:DraggableHaft>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
                <!--  空白页  -->
                <Grid Visibility="{Binding CurrentAppItemPage.AppItemGroups.Count, Converter={x:Static hui:NumEqualParamToVisibilityVisibleConverter.Instance}, ConverterParameter=0}">
                    <StackPanel
                        Margin="0,5,80,0"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Top"
                        d:Visibility="Visible">
                        <Path
                            Margin="0,0,0,10"
                            HorizontalAlignment="Right"
                            Data="{StaticResource ArrowUpGeometry}"
                            Fill="{DynamicResource SecondaryForegroundBrush}"
                            Style="{StaticResource PathIcon16Style}" />
                        <TextBlock Foreground="{DynamicResource SecondaryForegroundBrush}" Text="{Binding Main.PinDescription, Source={x:Static vm:LanguagePackage.Instance}}" />
                    </StackPanel>
                    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                        <Button
                            Padding="9,7"
                            HorizontalAlignment="Center"
                            Command="{Binding RemovePageCommand}"
                            Foreground="{DynamicResource SecondaryForegroundBrush}">
                            <StackPanel Orientation="Horizontal">
                                <Path
                                    HorizontalAlignment="Right"
                                    Data="{StaticResource DeleteGeometry}"
                                    Fill="{DynamicResource SecondaryForegroundBrush}"
                                    Style="{StaticResource PathIcon16Style}" />
                                <TextBlock Margin="10,0,0,0" Text="{Binding Main.RemovePage, Source={x:Static vm:LanguagePackage.Instance}}" />
                            </StackPanel>
                        </Button>
                        <TextBlock
                            Margin="20"
                            Foreground="{DynamicResource SecondaryForegroundBrush}"
                            Text="{Binding Main.EmptyPageDescription, Source={x:Static vm:LanguagePackage.Instance}}" />
                    </StackPanel>
                </Grid>
                <!--  组右键菜单  -->
                <Grid d:Visibility="Collapsed" Visibility="{Binding CurrentAppItemGroup, FallbackValue={x:Static Visibility.Visible}, TargetNullValue={x:Static Visibility.Collapsed}}">
                    <Button
                        AllowDrop="True"
                        Background="{DynamicResource SecondaryBackgroundBrush}"
                        Command="{Binding CloseGroupMenuCommand}"
                        CommandParameter="Close"
                        Opacity="0.95"
                        Style="{DynamicResource ButtonBlankStyle}">
                        <b:Interaction.Triggers>
                            <b:EventTrigger EventName="Drop">
                                <b:InvokeCommandAction Command="{Binding AppItemGroupSidePadDropCommand, Source={x:Static vm:MainWindowViewModel.Instance}}" PassEventArgsToCommand="True" />
                            </b:EventTrigger>
                        </b:Interaction.Triggers>
                    </Button>
                    <hui:DropShadowDecorator
                        Margin="35"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        CornerRadius="10"
                        DropShadowPlacement="BottomRight">
                        <hui:GroupBox
                            Background="{DynamicResource SecondaryBackgroundBrush}"
                            DataContext="{Binding CurrentAppItemGroup}"
                            HeaderBackground="{DynamicResource SecondaryBackgroundBrush}">
                            <b:Interaction.Triggers>
                                <b:EventTrigger EventName="Drop">
                                    <b:InvokeCommandAction Command="{Binding AppItemGroupPadDropCommand, Source={x:Static vm:MainWindowViewModel.Instance}}" PassEventArgsToCommand="True" />
                                </b:EventTrigger>
                            </b:Interaction.Triggers>
                            <hui:GroupBox.Header>
                                <hui:TextBox
                                    Width="300"
                                    VerticalAlignment="Center"
                                    d:Text="Title"
                                    MaxLength="30"
                                    Text="{Binding GroupTitle, Mode=TwoWay}"
                                    TextAlignment="Center"
                                    TrayBorderEventVisibility="FocusVisible" />
                            </hui:GroupBox.Header>
                            <ListBox
                                Margin="20,0,20,20"
                                d:ItemsSource="{d:SampleData ItemCount=16}"
                                Background="Transparent"
                                BorderThickness="0"
                                ItemsSource="{Binding AppItems}">
                                <ListBox.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <WrapPanel
                                            Width="{Binding GroupCol, Source={x:Static vm:Settings.Instance}, Converter={x:Static hui:NumMulParamToDoubleConverter.Instance}, ConverterParameter=95}"
                                            Height="{Binding GroupRow, Source={x:Static vm:Settings.Instance}, Converter={x:Static hui:NumMulParamToDoubleConverter.Instance}, ConverterParameter=95}"
                                            d:Height="380"
                                            d:Width="380" />
                                    </ItemsPanelTemplate>
                                </ListBox.ItemsPanel>
                                <ListBox.ItemContainerStyle>
                                    <Style BasedOn="{StaticResource {x:Type ListBoxItem}}" TargetType="{x:Type ListBoxItem}">
                                        <Setter Property="Margin" Value="0" />
                                        <Setter Property="Padding" Value="0" />
                                        <Setter Property="Background" Value="Transparent" />
                                        <Setter Property="BorderThickness" Value="0" />
                                        <Setter Property="Focusable" Value="False" />
                                    </Style>
                                </ListBox.ItemContainerStyle>
                                <ListBox.ItemTemplate>
                                    <DataTemplate DataType="{x:Type vm:AppItem}">
                                        <hui:DraggableHaft
                                            Width="95"
                                            Height="95"
                                            AllowDrop="True"
                                            Background="Transparent"
                                            ClickCommand="{Binding AppItemClickCommand, Source={x:Static vm:MainWindowViewModel.Instance}}"
                                            ClickCommandParameter="{Binding}"
                                            DragData="{Binding}"
                                            DropCommand="{Binding AppItemDropCommand, Source={x:Static vm:MainWindowViewModel.Instance}}"
                                            PassEventArgsToDropCommand="True">
                                            <b:Interaction.Triggers>
                                                <b:EventTrigger EventName="DragEnter">
                                                    <b:ChangePropertyAction PropertyName="Background" Value="{DynamicResource Alpha0CBrush}" />
                                                </b:EventTrigger>
                                                <b:EventTrigger EventName="DragLeave">
                                                    <b:ChangePropertyAction PropertyName="Background" Value="Transparent" />
                                                </b:EventTrigger>
                                                <b:EventTrigger EventName="MouseRightButtonUp">
                                                    <b:InvokeCommandAction Command="{Binding AppItemMouseRightUpCommand, Source={x:Static vm:MainWindowViewModel.Instance}}" CommandParameter="{Binding}" />
                                                </b:EventTrigger>
                                            </b:Interaction.Triggers>
                                            <StackPanel>
                                                <Grid
                                                    Width="32"
                                                    Height="32"
                                                    Margin="15,10,15,10">
                                                    <ContentControl Content="{Binding Icon}">
                                                        <d:ContentControl.Content>
                                                            <d:Path Data="{StaticResource FileBreakGeometry}" Style="{StaticResource PathIcon32Style}" />
                                                        </d:ContentControl.Content>
                                                    </ContentControl>
                                                </Grid>
                                                <TextBlock
                                                    Margin="4,0,4,0"
                                                    d:Text="ABC 12345 ZX666"
                                                    Text="{Binding Title}"
                                                    TextAlignment="Center"
                                                    TextWrapping="Wrap" />
                                            </StackPanel>
                                        </hui:DraggableHaft>
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                            </ListBox>
                        </hui:GroupBox>
                    </hui:DropShadowDecorator>
                </Grid>
                <!--  文件右键菜单  -->
                <Grid d:Visibility="Collapsed" Visibility="{Binding CurrentAppItem, FallbackValue={x:Static Visibility.Visible}, TargetNullValue={x:Static Visibility.Collapsed}}">
                    <Button
                        Background="{DynamicResource SecondaryBackgroundBrush}"
                        Command="{Binding CloseItemMenuCommand}"
                        CommandParameter="Close"
                        Opacity="0.95"
                        Style="{DynamicResource ButtonBlankStyle}" />
                    <StackPanel Margin="35" VerticalAlignment="Center">
                        <Grid Height="45" Margin="10,0">
                            <hui:Button
                                Padding="12,12"
                                HorizontalAlignment="Left"
                                Command="{Binding MoveOutGroupCommand}"
                                CornerRadius="5,5,0,0"
                                Visibility="{Binding MoveOutGroupVisibility}">
                                <StackPanel Orientation="Horizontal">
                                    <Path Data="{StaticResource ForwardFillGeometry}" Style="{DynamicResource PathIcon16Style}" />
                                    <TextBlock Margin="10,0,0,0" Text="{Binding Main.MoveOutGroup, Source={x:Static vm:LanguagePackage.Instance}}" />
                                </StackPanel>
                            </hui:Button>
                            <hui:Button
                                Padding="12,12"
                                HorizontalAlignment="Right"
                                Command="{Binding MoveToPreviousPageCommand}"
                                CornerRadius="5,5,0,0"
                                Visibility="{Binding MoveToPageVisibility}">
                                <StackPanel Orientation="Horizontal">
                                    <Path Data="{StaticResource ArrowUpBoldHexagonGeometry}" Style="{DynamicResource PathIcon16Style}" />
                                    <TextBlock Margin="10,0,0,0" Text="{Binding Main.MoveToPreviousPage, Source={x:Static vm:LanguagePackage.Instance}}" />
                                </StackPanel>
                            </hui:Button>
                        </Grid>
                        <hui:DropShadowDecorator
                            MaxWidth="570"
                            CornerRadius="10"
                            DropShadowPlacement="BottomRight">
                            <hui:GroupBox
                                Background="{DynamicResource SecondaryBackgroundBrush}"
                                DataContext="{Binding CurrentAppItem}"
                                HeaderBackground="{DynamicResource PrimaryBackgroundBrush}">
                                <hui:GroupBox.Header>
                                    <DockPanel LastChildFill="True">
                                        <ContentControl
                                            Width="32"
                                            Height="32"
                                            Margin="20,0,0,0"
                                            Content="{Binding Icon}"
                                            DockPanel.Dock="Left">
                                            <d:ContentControl.Content>
                                                <d:Path Data="{StaticResource FileBreakGeometry}" Style="{StaticResource PathIcon32Style}" />
                                            </d:ContentControl.Content>
                                        </ContentControl>
                                        <hui:TextBox
                                            Margin="20,0,20,0"
                                            VerticalAlignment="Center"
                                            d:Text="Title"
                                            MaxLength="30"
                                            Text="{Binding Title, Mode=TwoWay}"
                                            TrayBorderEventVisibility="FocusVisible" />
                                    </DockPanel>
                                </hui:GroupBox.Header>
                                <StackPanel>
                                    <Border
                                        Height="48"
                                        Margin="0,5,0,0"
                                        CornerRadius="{DynamicResource ContainerCornerRadius}"
                                        Visibility="{Binding Kind, Converter={x:Static local:AppItemKindToVisibilityVisibleConverter.Instance}}">
                                        <hui:TextBox
                                            Margin="20,0,20,0"
                                            VerticalAlignment="Center"
                                            DockPanel.Dock="Left"
                                            TrayBorderEventVisibility="FocusVisible">
                                            <hui:TextBox.Header>
                                                <Label Content="{Binding AppItem.Arguments, Source={x:Static vm:LanguagePackage.Instance}, Mode=TwoWay}" Style="{StaticResource LabelHeaderStyle}" />
                                            </hui:TextBox.Header>
                                        </hui:TextBox>
                                    </Border>
                                    <Button
                                        Height="48"
                                        Margin="0,5,0,0"
                                        Command="{Binding CloseItemMenuCommand, Source={x:Static vm:MainWindowViewModel.Instance}}"
                                        CommandParameter="Run"
                                        Style="{DynamicResource ButtonContainerStyle}">
                                        <StackPanel Orientation="Horizontal">
                                            <Path Data="{StaticResource ApplicationGeometry}" Style="{StaticResource PathIcon16Style}" />
                                            <TextBlock
                                                Margin="20,0,0,0"
                                                VerticalAlignment="Center"
                                                Text="{Binding AppItem.Run, Source={x:Static vm:LanguagePackage.Instance}}" />
                                        </StackPanel>
                                    </Button>
                                    <Grid Margin="0,5,0,0" Visibility="{Binding Kind, Converter={x:Static local:AppItemKindToVisibilityVisibleConverter.Instance}}">
                                        <Button
                                            Height="48"
                                            Command="{Binding CloseItemMenuCommand, Source={x:Static vm:MainWindowViewModel.Instance}}"
                                            CommandParameter="RunAsAdministrator"
                                            Style="{DynamicResource ButtonContainerStyle}">
                                            <StackPanel Orientation="Horizontal">
                                                <Grid>
                                                    <Path Data="{StaticResource ApplicationGeometry}" Style="{StaticResource PathIcon16Style}" />
                                                    <Path Data="{StaticResource SecurityGeometry}" Style="{StaticResource PathIcon8Style}" />
                                                </Grid>
                                                <TextBlock
                                                    Margin="20,0,0,0"
                                                    VerticalAlignment="Center"
                                                    Text="{Binding AppItem.RunAsAdministrator, Source={x:Static vm:LanguagePackage.Instance}}" />
                                            </StackPanel>
                                        </Button>
                                        <hui:CheckBox
                                            Margin="0,0,50,0"
                                            HorizontalAlignment="Right"
                                            Content="{Binding AppItem.DefaultRunAsAdministrator, Source={x:Static vm:LanguagePackage.Instance}}"
                                            IconPlacement="Right"
                                            IsChecked="{Binding Privilege, Mode=TwoWay}"
                                            Style="{DynamicResource CheckBoxSwitchRightStyle}" />
                                    </Grid>
                                    <Button
                                        Height="48"
                                        Margin="0,5,0,0"
                                        Command="{Binding CloseItemMenuCommand, Source={x:Static vm:MainWindowViewModel.Instance}}"
                                        CommandParameter="OpenFileLocation"
                                        Style="{DynamicResource ButtonContainerStyle}">
                                        <StackPanel Orientation="Horizontal">
                                            <Path Data="{StaticResource FolderOpenGeometry}" Style="{StaticResource PathIcon16Style}" />
                                            <TextBlock
                                                Margin="20,0,0,0"
                                                VerticalAlignment="Center"
                                                Text="{Binding AppItem.OpenFileLocation, Source={x:Static vm:LanguagePackage.Instance}}" />
                                        </StackPanel>
                                    </Button>
                                    <Grid Margin="0,5,0,0">
                                        <Button
                                            Height="48"
                                            Command="{Binding CloseItemMenuCommand, Source={x:Static vm:MainWindowViewModel.Instance}}"
                                            CommandParameter="Remove"
                                            IsEnabled="{Binding AllowRemove, Source={x:Static vm:Settings.Instance}}"
                                            Style="{DynamicResource ButtonContainerStyle}">
                                            <DockPanel>
                                                <Path
                                                    Data="{StaticResource DeleteGeometry}"
                                                    DockPanel.Dock="Left"
                                                    Style="{StaticResource PathIcon16Style}" />
                                                <TextBlock
                                                    Margin="20,0,0,0"
                                                    VerticalAlignment="Center"
                                                    Text="{Binding AppItem.Remove, Source={x:Static vm:LanguagePackage.Instance}}" />
                                            </DockPanel>
                                        </Button>
                                        <CheckBox
                                            Margin="0,0,50,0"
                                            HorizontalAlignment="Right"
                                            Content="{Binding AppItem.AllowsRemove, Source={x:Static vm:LanguagePackage.Instance}}"
                                            IsChecked="{Binding AllowRemove, Mode=TwoWay, Source={x:Static vm:Settings.Instance}}"
                                            Style="{DynamicResource CheckBoxSwitchRightStyle}" />
                                    </Grid>
                                </StackPanel>
                            </hui:GroupBox>
                        </hui:DropShadowDecorator>
                        <Grid Height="45" Margin="10,0">
                            <hui:Button
                                Padding="12,12"
                                HorizontalAlignment="Right"
                                Command="{Binding MoveToNextPageCommand}"
                                CornerRadius="0,0,5,5"
                                Visibility="{Binding MoveToPageVisibility}">
                                <StackPanel Orientation="Horizontal">
                                    <Path Data="{StaticResource ArrowDownBoldHexagonGeometry}" Style="{DynamicResource PathIcon16Style}" />
                                    <TextBlock Margin="10,0,0,0" Text="{Binding Main.MoveToNextPage, Source={x:Static vm:LanguagePackage.Instance}}" />
                                </StackPanel>
                            </hui:Button>
                        </Grid>
                    </StackPanel>
                </Grid>
                <!--  设置页  -->
                <Grid d:Visibility="Collapsed" Visibility="{Binding SettingsMenuVisibility}">
                    <Button
                        Background="{DynamicResource SecondaryBackgroundBrush}"
                        Command="{Binding ToggleSettingsMenuCommand}"
                        Opacity="0.95"
                        Style="{DynamicResource ButtonBlankStyle}" />
                    <hui:DropShadowDecorator
                        MaxWidth="570"
                        Margin="35"
                        VerticalAlignment="Center"
                        CornerRadius="10"
                        DropShadowPlacement="BottomRight">
                        <hui:GroupBox Background="{DynamicResource SecondaryBackgroundBrush}" HeaderBackground="{DynamicResource PrimaryBackgroundBrush}">
                            <hui:GroupBox.Header>
                                <StackPanel Orientation="Horizontal">
                                    <Path
                                        Margin="20,0,0,0"
                                        Data="{StaticResource SettingGeometry}"
                                        Style="{StaticResource PathIcon32Style}" />
                                    <TextBlock
                                        Margin="20,0,0,0"
                                        VerticalAlignment="Center"
                                        Text="{Binding Settings.Settings, Source={x:Static vm:LanguagePackage.Instance}}" />
                                </StackPanel>
                            </hui:GroupBox.Header>
                            <StackPanel>
                                <Border
                                    Height="48"
                                    Margin="0,5,0,0"
                                    CornerRadius="{DynamicResource ContainerCornerRadius}">
                                    <DockPanel LastChildFill="False">
                                        <Path
                                            Margin="20,0,0,0"
                                            Data="{StaticResource ThemeGeometry}"
                                            DockPanel.Dock="Left"
                                            Style="{StaticResource PathIcon16Style}" />
                                        <TextBlock
                                            Margin="20,0,0,0"
                                            VerticalAlignment="Center"
                                            DockPanel.Dock="Left"
                                            Text="{Binding Settings.ThemeStyle, Source={x:Static vm:LanguagePackage.Instance}}" />
                                        <ComboBox
                                            Margin="0,0,20,0"
                                            VerticalAlignment="Center"
                                            DockPanel.Dock="Right"
                                            ItemsSource="{Binding ThemeStyles, Source={x:Static vm:Settings.Instance}}"
                                            SelectedItem="{Binding ThemeStyle, Source={x:Static vm:Settings.Instance}, Mode=TwoWay}" />
                                    </DockPanel>
                                </Border>
                                <Border
                                    Height="48"
                                    Margin="0,5,0,0"
                                    CornerRadius="{DynamicResource ContainerCornerRadius}">
                                    <DockPanel LastChildFill="False">
                                        <Path
                                            Margin="20,0,0,0"
                                            Data="{StaticResource GridGapFillGeometry}"
                                            DockPanel.Dock="Left"
                                            Style="{StaticResource PathIcon16Style}" />
                                        <TextBlock
                                            Margin="20,0,0,0"
                                            VerticalAlignment="Center"
                                            DockPanel.Dock="Left"
                                            Text="{Binding Settings.ShelfSize, Source={x:Static vm:LanguagePackage.Instance}}" />
                                        <hui:ComboBox
                                            Margin="0,0,20,0"
                                            VerticalAlignment="Center"
                                            DockPanel.Dock="Right"
                                            ItemsSource="{Binding ShelfRows, Source={x:Static vm:Settings.Instance}}"
                                            SelectedItem="{Binding ShelfRow, Source={x:Static vm:Settings.Instance}, Mode=TwoWay}">
                                            <hui:ComboBox.Header>
                                                <Path
                                                    Margin="7,0"
                                                    Data="{StaticResource MoreVerticalGeometry}"
                                                    Fill="{DynamicResource PrimaryForegroundBrush}"
                                                    Style="{StaticResource PathIcon16Style}" />
                                            </hui:ComboBox.Header>
                                        </hui:ComboBox>
                                        <hui:ComboBox
                                            Margin="0,0,20,0"
                                            VerticalAlignment="Center"
                                            DockPanel.Dock="Right"
                                            ItemsSource="{Binding ShelfCols, Source={x:Static vm:Settings.Instance}}"
                                            SelectedItem="{Binding ShelfCol, Source={x:Static vm:Settings.Instance}, Mode=TwoWay}">
                                            <hui:ComboBox.Header>
                                                <Path
                                                    Margin="7,0"
                                                    Data="{StaticResource MoreHorizontalGeometry}"
                                                    Fill="{DynamicResource PrimaryForegroundBrush}"
                                                    Style="{StaticResource PathIcon16Style}" />
                                            </hui:ComboBox.Header>
                                        </hui:ComboBox>
                                    </DockPanel>
                                </Border>
                                <Border
                                    Height="48"
                                    Margin="0,5,0,0"
                                    CornerRadius="{DynamicResource ContainerCornerRadius}">
                                    <DockPanel LastChildFill="False">
                                        <Path
                                            Margin="20,0,0,0"
                                            Data="{StaticResource EarthGeometry}"
                                            DockPanel.Dock="Left"
                                            Style="{StaticResource PathIcon16Style}" />
                                        <TextBlock
                                            Margin="20,0,0,0"
                                            VerticalAlignment="Center"
                                            DockPanel.Dock="Left"
                                            Text="Language" />
                                        <ComboBox
                                            Margin="0,0,20,0"
                                            VerticalAlignment="Center"
                                            DisplayMemberPath="Key"
                                            DockPanel.Dock="Right"
                                            ItemsSource="{Binding Languages, Source={x:Static vm:Settings.Instance}}"
                                            SelectedItem="{Binding Language, Source={x:Static vm:Settings.Instance}, Mode=TwoWay}" />
                                        <hui:DropDownButton
                                            Margin="0,0,20,0"
                                            VerticalAlignment="Center"
                                            DockPanel.Dock="Right"
                                            Header="Export">
                                            <Button
                                                HorizontalContentAlignment="Left"
                                                Command="{Binding ExportLanguageCommand}"
                                                CommandParameter="Currently"
                                                Content="Currently"
                                                Style="{DynamicResource ButtonDropItemStyle}" />
                                            <Button
                                                HorizontalContentAlignment="Left"
                                                Command="{Binding ExportLanguageCommand}"
                                                CommandParameter="Default"
                                                Content="Default"
                                                Style="{DynamicResource ButtonDropItemStyle}" />
                                        </hui:DropDownButton>
                                    </DockPanel>
                                </Border>
                            </StackPanel>
                        </hui:GroupBox>
                    </hui:DropShadowDecorator>
                </Grid>
            </Grid>
            <Grid
                Grid.Row="1"
                Height="70"
                Background="{DynamicResource PrimaryBackgroundBrush}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <Grid Grid.Column="0">
                    <!--  展台  -->
                </Grid>
                <StackPanel
                    Grid.Column="1"
                    Margin="0,0,30,0"
                    Orientation="Horizontal">
                    <!--  主按钮  -->
                    <Button
                        Margin="2"
                        Padding="10"
                        VerticalAlignment="Center"
                        Command="{Binding SetLocationCommand}"
                        CommandParameter="{Binding ElementName=Window}"
                        Content="{StaticResource LocationOnGeometry}"
                        ContentTemplate="{StaticResource GeometryToPathIcon16DataTemplate}"
                        Style="{DynamicResource ButtonTransparentStyle}"
                        ToolTip="{Binding Main.LocateButtonTip, Source={x:Static vm:LanguagePackage.Instance}}"
                        ToolTipService.Placement="Top" />
                    <Button
                        x:Name="SettingsToggleButton"
                        Margin="2"
                        Padding="10"
                        VerticalAlignment="Center"
                        Command="{Binding ToggleSettingsMenuCommand}"
                        Content="{StaticResource SettingGeometry}"
                        ContentTemplate="{StaticResource GeometryToPathIcon16DataTemplate}"
                        Style="{DynamicResource ButtonTransparentStyle}"
                        ToolTip="{Binding Settings.Settings, Source={x:Static vm:LanguagePackage.Instance}}"
                        ToolTipService.Placement="Top" />
                    <hui:MenuButton
                        Margin="2"
                        Padding="10"
                        VerticalAlignment="Center"
                        ArrowVisibility="Collapsed"
                        DropDownPlacement="Top"
                        Header="{StaticResource LayersFillGeometry}"
                        HeaderTemplate="{StaticResource GeometryToPathIcon16DataTemplate}"
                        Style="{DynamicResource HuiMenuButtonTransparentStyle}"
                        ToolTip="{Binding Main.AppInfoButtonTip, Source={x:Static vm:LanguagePackage.Instance}}"
                        ToolTipService.Placement="Top">
                        <MenuItem Header="Update" IsEnabled="False">
                            <MenuItem.Icon>
                                <Path
                                    Data="{StaticResource WebGeometry}"
                                    Fill="{DynamicResource PrimaryForegroundBrush}"
                                    Style="{StaticResource PathIcon16Style}" />
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem
                            hui:UriValueAttached.Item1="https://github.com/LokiHonoo/Wireshelves"
                            Command="{Binding OpenUriCommand}"
                            CommandParameter="{Binding Path=(hui:UriValueAttached.Item1), RelativeSource={RelativeSource Mode=Self}}"
                            Header="Github">
                            <MenuItem.Icon>
                                <Path
                                    Data="{StaticResource GitHubGeometry}"
                                    Fill="{DynamicResource PrimaryForegroundBrush}"
                                    Style="{StaticResource PathIcon16Style}" />
                            </MenuItem.Icon>
                        </MenuItem>

                    </hui:MenuButton>
                    <Button
                        Margin="2"
                        Padding="10"
                        VerticalAlignment="Center"
                        Command="{Binding ExitCommand}"
                        Content="{StaticResource ExitGeometry}"
                        ContentTemplate="{StaticResource GeometryToPathIcon16DataTemplate}"
                        Foreground="{DynamicResource PrimaryForegroundBrush}"
                        Style="{DynamicResource ButtonTransparentStyle}"
                        ToolTip="{Binding Main.ExitButtonTip, Source={x:Static vm:LanguagePackage.Instance}}"
                        ToolTipService.Placement="Top" />
                </StackPanel>
            </Grid>
        </Grid>
        <!--  DialogHost  -->
        <hui:DialogHost x:Name="MainDialogHost" Grid.ColumnSpan="2" />
        <!--  ToastHost  -->
        <hui:ToastHost
            x:Name="MainToastHost"
            Margin="20,0"
            VerticalAlignment="Top" />
    </Grid>
</hui:Window>
